<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mental Health Questionnaire</title>
<style>
  body { 
    font-family: Arial, sans-serif;
    background-color: #aed7b6; 
    color: #1B845A;
    display: flex; 
    justify-content: center;
    align-items: center; 
    height: 100vh;
    margin: 0;
  }

  .container { 
    width: 95%; 
    max-width: 700px; 
    background: white; 
    padding: 45px 35px; 
    border: 3px solid #1B845A;
    border-radius: 15px; 
    text-align: center; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }

  h2 { 
    color: #276727;
  }

  button.option { 
    display: block; 
    width: 100%; 
    margin: 8px 0; 
    padding: 15px; 
    border: none; 
    border-radius: 8px;
    background-color: #e4f5e4; 
    cursor: pointer; 
    transition: 0.2s;
  }

  button.option:hover { 
    background-color: #c7ecc7;
  }

  button.option.selected { 
    background-color: #76c776;
    color: white; 
  }

  #buttonContainer {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
  }

  #nextBtn, #prevBtn {
    padding: 10px 25px; 
    background-color: #276727; 
    color: white; 
    border: none; 
    border-radius: 8px;
    cursor: pointer; 
    transition: background-color 0.2s ease;
  }

  #nextBtn:hover, #prevBtn:hover {
    background-color: #2e7d32;
  }

  .result {
    text-align: left; 
    margin-top: 20px; 
  }

  .bar-container { 
    background-color: #e0e0e0; 
    border-radius: 10px; 
    margin: 10px 0; 
    width: 100%; 
    height: 25px; 
    overflow: hidden;
  }

  .bar {
    height: 100%; 
    border-radius: 10px; 
    text-align: right; 
    padding-right: 10px; 
    color: white; 
    font-weight: bold;
    line-height: 25px; 
    width: 0%; 
    transition: width 1.5s ease; 
  }

  .Anxiety { background-color: #124a15; }
  .Stress { background-color: #227825; }
  .Depression { background-color: #438f46; }
  .Happiness { background-color: #89c08b; }
  .Overthinking { background-color: #99d49c; }

  #dashboardBtn {
    display: inline-block;
    margin-top: 35px;
    padding: 12px 28px;
    background-color: #276727;
    color: white;
    text-decoration: none;  
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.2s ease;
  }

  #dashboardBtn:hover {
    background-color: #2e7d32;
  }
</style>
</head>
<body>

<div class="container">
  <h2 id="question">Loading</h2>
  <div id="options"></div>

  <div id="buttonContainer">
    <button id="prevBtn">Previous</button>
    <button id="nextBtn">Next</button>
  </div>

  <div id="result" class="result"></div>
</div>

<script>
const questions = [
  { text: "How often did you feel genuinely happy or content today?", factor: "Happiness" },
  { text: "How often did you appreciate the little things in your life?", factor: "Happiness" },
  { text: "How often did you wake up feeling positive about your day?", factor: "Happiness" },
  { text: "How often did you feel thankful for the people around you?", factor: "Happiness" },
  { text: "How often did you feel under pressure to finish tasks on time?", factor: "Stress" },
  { text: "How often did you feel mentally or emotionally exhausted?", factor: "Stress" },
  { text: "How often did you find it difficult to relax even during breaks?", factor: "Stress" },
  { text: "How often did you feel overwhelmed by responsibilities?", factor: "Stress" },
  { text: "How often did you feel nervous or on edge without a clear reason?", factor: "Anxiety" },
  { text: "How often did you feel uneasy about situations you canâ€™t control?", factor: "Anxiety" },
  { text: "How often did you experience a sudden rush of worry or fear?", factor: "Anxiety" },
  { text: "How often did your heart race due to anxious thoughts?", factor: "Anxiety" },
  { text: "How often did you replay past events in your mind?", factor: "Overthinking" },
  { text: "How often did you spend too much time thinking about 'what ifs'?", factor: "Overthinking" },
  { text: "How often did your thoughts keep you from sleeping peacefully?", factor: "Overthinking" },
  { text: "How often did you struggle to make decisions because of too much thinking?", factor: "Overthinking" },
  { text: "How often did you feel sad or emotionally low without a clear reason?", factor: "Depression" },
  { text: "How often did you lose interest in things that once made you happy?", factor: "Depression" },
  { text: "How often did you feel like isolating yourself from others?", factor: "Depression" },
  { text: "How often did you feel like life lacks direction or purpose?", factor: "Depression" }
];

const options = ["Never", "Sometimes", "Often", "Always"];
const factorScores = { Anxiety: 0, Stress: 0, Depression: 0, Happiness: 0, Overthinking: 0 };
const factorweight = { "Never": 0, "Sometimes": 1, "Often": 2, "Always": 3 };

let current = 0;
let answers = Array(questions.length).fill(null);

const questionQ1 = document.getElementById("question");
const optionsOl = document.getElementById("options");
const nextBtnEl = document.getElementById("nextBtn");
const prevBtnEl = document.getElementById("prevBtn");
const resultRl = document.getElementById("result");

function showQuestion() {
  if (current >= questions.length) {
    calculateResult();
    return;
  }

  questionQ1.textContent = questions[current].text;
  optionsOl.innerHTML = "";

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.className = "option";
    if (answers[current] === opt) {
      btn.classList.add("selected");
    }
    btn.onclick = () => {
      Array.from(optionsOl.children).forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");
      answers[current] = opt;
    };
    optionsOl.appendChild(btn);
  });

  prevBtnEl.style.display = current === 0 ? "none" : "inline-block";
}

nextBtnEl.onclick = function () {
  const selected = answers[current];
  if (!selected) {
    alert("Please select an option.");
    return;
  }
  current++;
  showQuestion();
};

prevBtnEl.onclick = function () {
  if (current > 0) {
    current--;
    showQuestion();
  }
};

function calculateResult() {
  questionQ1.textContent = "Result";
  optionsOl.innerHTML = "";
  nextBtnEl.style.display = "none";
  prevBtnEl.style.display = "none";
  resultRl.innerHTML = "";

 
  for (let i = 0; i < questions.length; i++) {
    const factor = questions[i].factor;
    let score = factorweight[answers[i]];
    if (factor === "Happiness") score = 3 - score;
    factorScores[factor] += score;
  }

  const totalScore = Object.values(factorScores).reduce((a,b) => a+b, 0);

  for (const f in factorScores) {
    const percent = totalScore ? (factorScores[f] / totalScore) * 100 : 0;
    const label = document.createElement("p");
    label.innerHTML = `<strong>${f}:</strong>`;
    const container = document.createElement("div");
    container.className = "bar-container";
    const bar = document.createElement("div");
    bar.className = `bar ${f}`;
    bar.style.width = percent + "%";
    bar.textContent = Math.round(percent) + "%";
    container.appendChild(bar);
    resultRl.appendChild(label);
    resultRl.appendChild(container);
  }

 
  const dashboardBtnContainer = document.createElement("div");
  dashboardBtnContainer.style.textAlign = "center";

  const dashboardBtn = document.createElement("a");
  dashboardBtn.href = "#";
  dashboardBtn.id = "dashboardBtn";
  dashboardBtn.textContent = "Go to Dashboard";

  dashboardBtnContainer.appendChild(dashboardBtn);
  resultRl.appendChild(dashboardBtnContainer);
}

showQuestion();
</script>
</body>
</html>
